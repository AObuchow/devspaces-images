======= BOOTSTRAP DOCKERFILE =======>
#
# Copyright (c) 2018-2022 Red Hat, Inc.
# This program and the accompanying materials are made
# available under the terms of the Eclipse Public License 2.0
# which is available at https://www.eclipse.org/legal/epl-2.0/
#
# SPDX-License-Identifier: EPL-2.0
#
# Contributors:
#   Red Hat, Inc. - initial API and implementation
#   IBM Corporation - implementation
#

# Builder: check meta.yamls and create index.json
# registry.access.redhat.com/ubi8/python-38
FROM registry-proxy.engineering.redhat.com/rh-osbs/ubi8-python-38:1-100 as builder
USER 0

ARG BOOTSTRAP=true
ENV BOOTSTRAP=${BOOTSTRAP}
# if not defined or string is null, allow all registries/tags in list_referenced_images
# otherwise restrict to only those space-separated registries/tags; if others found, build will fail
# useful for failing build if quay images in an RC, or wrong devspaces image tag (3.2 in 3.1 build)
ARG ALLOWED_REGISTRIES=""
ENV ALLOWED_REGISTRIES=${ALLOWED_REGISTRIES}
ARG ALLOWED_TAGS=""
ENV ALLOWED_TAGS=${ALLOWED_TAGS}

COPY ./build/dockerfiles/content_sets_rhel8.repo /etc/yum.repos.d/
COPY ./build/dockerfiles/rhel.install.sh /tmp
RUN /tmp/rhel.install.sh && rm -f /tmp/rhel.install.sh

COPY ./build/scripts ./versions.json /build/
COPY ./build/scripts/clone_and_zip.sh /build/build/scripts/
COPY ./VERSION /
COPY ./devfiles /build/devfiles
WORKDIR /build/

RUN ./generate_devworkspace_templates.sh
RUN chmod -R g+rwX /build/resources

# validate devfile content
RUN ./check_referenced_images.sh devfiles --registries "${ALLOWED_REGISTRIES}" --tags "${ALLOWED_TAGS}"
RUN ./check_mandatory_fields.sh devfiles

# Cache projects in DS 
COPY ./build/dockerfiles/rhel.cache_projects.sh /tmp/ 
RUN /tmp/rhel.cache_projects.sh /build/ && rm -rf /tmp/rhel.cache_projects.sh /tmp/resources.tgz 

# don't do swaps, or we end up with missing content if built on s390x or ppc64le worker
# RUN ./swap_yamlfiles.sh devfiles
# RUN ./swap_images.sh devfiles
RUN ./index.sh > /build/devfiles/index.json && \
    ./list_referenced_images.sh devfiles > /build/devfiles/external_images.txt && \
    ./list_referenced_images_by_file.sh devfiles > /build/devfiles/external_images_by_devfile.txt && \
    chmod -R g+rwX /build/devfiles

<======= BOOTSTRAP DOCKERFILE =======
======= START BOOTSTRAP BUILD =======>
STEP 1/23: FROM registry-proxy.engineering.redhat.com/rh-osbs/ubi8-python-38:1-100 AS builder
STEP 2/23: USER 0
--> bd88937851a
STEP 3/23: ARG BOOTSTRAP=true
--> fb694353107
STEP 4/23: ENV BOOTSTRAP=${BOOTSTRAP}
--> bb995db6987
STEP 5/23: ARG ALLOWED_REGISTRIES=""
--> 7b80723df01
STEP 6/23: ENV ALLOWED_REGISTRIES=${ALLOWED_REGISTRIES}
--> 69f56d9de83
STEP 7/23: ARG ALLOWED_TAGS=""
--> cc0393b87fb
STEP 8/23: ENV ALLOWED_TAGS=${ALLOWED_TAGS}
--> 23fbd761839
STEP 9/23: COPY ./build/dockerfiles/content_sets_rhel8.repo /etc/yum.repos.d/
--> 129b81b2c6e
STEP 10/23: COPY ./build/dockerfiles/rhel.install.sh /tmp
--> b0705258f63
STEP 11/23: RUN /tmp/rhel.install.sh && rm -f /tmp/rhel.install.sh
Updating Subscription Management repositories.
Unable to read consumer identity
Subscription Manager is operating in container mode.

This system is not registered with an entitlement server. You can use subscription-manager to register.

Red Hat Enterprise Linux 8 for Power, little en  63 MB/s |  42 MB     00:00    
Red Hat Enterprise Linux 8 for Power, little en  68 MB/s |  43 MB     00:00    
Red Hat Universal Base Image 8 (RPMs) - BaseOS  565 kB/s | 577 kB     00:01    
Red Hat Universal Base Image 8 (RPMs) - AppStre 3.5 MB/s | 2.6 MB     00:00    
Red Hat Universal Base Image 8 (RPMs) - CodeRea  18 kB/s |  14 kB     00:00    
Package findutils-1:4.6.0-20.el8.ppc64le is already installed.
Package bash-4.4.20-3.el8.ppc64le is already installed.
Package wget-1.19.5-10.el8.ppc64le is already installed.
Package yum-4.7.0-8.el8.noarch is already installed.
Package git-2.31.1-2.el8.ppc64le is already installed.
Package gzip-1.9-13.el8_5.ppc64le is already installed.
Package tar-2:1.30-5.el8.ppc64le is already installed.
Package python3-six-1.11.0-8.el8.noarch is already installed.
Dependencies resolved.
================================================================================================================
 Package               Arch     Version                                 Repository                          Size
================================================================================================================
Installing:
 jq                    ppc64le  1.6-3.el8                               rhel-8-for-ppc64le-appstream-rpms  215 k
 python3-pip           noarch   9.0.3-22.el8                            rhel-8-for-ppc64le-appstream-rpms   20 k
 skopeo                ppc64le  2:1.8.0-2.module+el8.6.0+15917+093ca6f8 rhel-8-for-ppc64le-appstream-rpms  5.9 M
Upgrading:
 bash                  ppc64le  4.4.20-4.el8_6                          rhel-8-for-ppc64le-baseos-rpms     1.6 M
Installing dependencies:
 containers-common     ppc64le  2:1-35.module+el8.6.0+15917+093ca6f8    rhel-8-for-ppc64le-appstream-rpms  109 k
 criu                  ppc64le  3.15-3.module+el8.6.0+15875+dc9a2b96    rhel-8-for-ppc64le-appstream-rpms  536 k
 fuse-common           ppc64le  3.3.0-15.el8                            rhel-8-for-ppc64le-baseos-rpms      22 k
 fuse3                 ppc64le  3.3.0-15.el8                            rhel-8-for-ppc64le-baseos-rpms      57 k
 fuse3-libs            ppc64le  3.3.0-15.el8                            rhel-8-for-ppc64le-baseos-rpms      99 k
 iptables-libs         ppc64le  1.8.4-22.el8                            rhel-8-for-ppc64le-baseos-rpms     114 k
 jansson               ppc64le  2.14-1.el8                              rhel-8-for-ppc64le-baseos-rpms      51 k
 kmod                  ppc64le  25-19.el8                               rhel-8-for-ppc64le-baseos-rpms     138 k
 libibverbs            ppc64le  37.2-1.el8                              rhel-8-for-ppc64le-baseos-rpms     412 k
 libmnl                ppc64le  1.0.4-6.el8                             rhel-8-for-ppc64le-baseos-rpms      31 k
 libnet                ppc64le  1.1.6-15.el8                            rhel-8-for-ppc64le-appstream-rpms   73 k
 libnftnl              ppc64le  1.1.5-5.el8                             rhel-8-for-ppc64le-baseos-rpms      88 k
 libpcap               ppc64le  14:1.9.1-5.el8                          rhel-8-for-ppc64le-baseos-rpms     176 k
 libslirp              ppc64le  4.4.0-1.module+el8.6.0+15875+dc9a2b96   rhel-8-for-ppc64le-appstream-rpms   74 k
 nftables              ppc64le  1:0.9.3-25.el8                          rhel-8-for-ppc64le-baseos-rpms     340 k
 oniguruma             ppc64le  6.8.2-2.el8                             rhel-8-for-ppc64le-appstream-rpms  199 k
 platform-python-pip   noarch   9.0.3-22.el8                            rhel-8-for-ppc64le-baseos-rpms     1.6 M
 protobuf-c            ppc64le  1.3.0-6.el8                             rhel-8-for-ppc64le-appstream-rpms   40 k
 python3-setuptools    noarch   39.2.0-6.el8                            rhel-8-for-ppc64le-baseos-rpms     163 k
 python36              ppc64le  3.6.8-38.module+el8.5.0+12207+5c5719bc  rhel-8-for-ppc64le-appstream-rpms   19 k
 runc                  ppc64le  1:1.1.3-2.module+el8.6.0+15917+093ca6f8 rhel-8-for-ppc64le-appstream-rpms  2.6 M
Installing weak dependencies:
 fuse-overlayfs        ppc64le  1.9-1.module+el8.6.0+15917+093ca6f8     rhel-8-for-ppc64le-appstream-rpms   74 k
 slirp4netns           ppc64le  1.2.0-2.module+el8.6.0+15917+093ca6f8   rhel-8-for-ppc64le-appstream-rpms   59 k
Enabling module streams:
 container-tools                rhel8                                                                           
 python36                       3.6                                                                             

Transaction Summary
================================================================================================================
Install  26 Packages
Upgrade   1 Package

Total download size: 15 M
Downloading Packages:
(1/27): python36-3.6.8-38.module+el8.5.0+12207+ 196 kB/s |  19 kB     00:00    
(2/27): libmnl-1.0.4-6.el8.ppc64le.rpm          279 kB/s |  31 kB     00:00    
(3/27): oniguruma-6.8.2-2.el8.ppc64le.rpm       1.6 MB/s | 199 kB     00:00    
(4/27): python3-setuptools-39.2.0-6.el8.noarch. 1.2 MB/s | 163 kB     00:00    
(5/27): libpcap-1.9.1-5.el8.ppc64le.rpm         1.3 MB/s | 176 kB     00:00    
(6/27): slirp4netns-1.2.0-2.module+el8.6.0+1591 2.4 MB/s |  59 kB     00:00    
(7/27): criu-3.15-3.module+el8.6.0+15875+dc9a2b 9.9 MB/s | 536 kB     00:00    
(8/27): libnftnl-1.1.5-5.el8.ppc64le.rpm        3.4 MB/s |  88 kB     00:00    
(9/27): fuse3-3.3.0-15.el8.ppc64le.rpm          1.7 MB/s |  57 kB     00:00    
(10/27): protobuf-c-1.3.0-6.el8.ppc64le.rpm     1.8 MB/s |  40 kB     00:00    
(11/27): python3-pip-9.0.3-22.el8.noarch.rpm    717 kB/s |  20 kB     00:00    
(12/27): libslirp-4.4.0-1.module+el8.6.0+15875+ 2.9 MB/s |  74 kB     00:00    
(13/27): fuse3-libs-3.3.0-15.el8.ppc64le.rpm    3.1 MB/s |  99 kB     00:00    
(14/27): libibverbs-37.2-1.el8.ppc64le.rpm      8.4 MB/s | 412 kB     00:00    
(15/27): containers-common-1-35.module+el8.6.0+ 3.8 MB/s | 109 kB     00:00    
(16/27): jq-1.6-3.el8.ppc64le.rpm               6.8 MB/s | 215 kB     00:00    
(17/27): kmod-25-19.el8.ppc64le.rpm             4.8 MB/s | 138 kB     00:00    
(18/27): platform-python-pip-9.0.3-22.el8.noarc  13 MB/s | 1.6 MB     00:00    
(19/27): jansson-2.14-1.el8.ppc64le.rpm         1.7 MB/s |  51 kB     00:00    
(20/27): fuse-overlayfs-1.9-1.module+el8.6.0+15 2.7 MB/s |  74 kB     00:00    
(21/27): fuse-common-3.3.0-15.el8.ppc64le.rpm   982 kB/s |  22 kB     00:00    
(22/27): nftables-0.9.3-25.el8.ppc64le.rpm      9.1 MB/s | 340 kB     00:00    
(23/27): libnet-1.1.6-15.el8.ppc64le.rpm        2.9 MB/s |  73 kB     00:00    
(24/27): iptables-libs-1.8.4-22.el8.ppc64le.rpm 3.6 MB/s | 114 kB     00:00    
(25/27): bash-4.4.20-4.el8_6.ppc64le.rpm         22 MB/s | 1.6 MB     00:00    
(26/27): runc-1.1.3-2.module+el8.6.0+15917+093c  21 MB/s | 2.6 MB     00:00    
(27/27): skopeo-1.8.0-2.module+el8.6.0+15917+09  15 MB/s | 5.9 MB     00:00    
--------------------------------------------------------------------------------
Total                                            38 MB/s |  15 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                        1/1 
  Upgrading        : bash-4.4.20-4.el8_6.ppc64le                           1/28 
  Running scriptlet: bash-4.4.20-4.el8_6.ppc64le                           1/28 
  Installing       : fuse3-libs-3.3.0-15.el8.ppc64le                       2/28 
  Running scriptlet: fuse3-libs-3.3.0-15.el8.ppc64le                       2/28 
  Installing       : libmnl-1.0.4-6.el8.ppc64le                            3/28 
  Running scriptlet: libmnl-1.0.4-6.el8.ppc64le                            3/28 
  Installing       : libnftnl-1.1.5-5.el8.ppc64le                          4/28 
  Running scriptlet: libnftnl-1.1.5-5.el8.ppc64le                          4/28 
  Installing       : libibverbs-37.2-1.el8.ppc64le                         5/28 
  Running scriptlet: libibverbs-37.2-1.el8.ppc64le                         5/28 
  Installing       : libpcap-14:1.9.1-5.el8.ppc64le                        6/28 
  Installing       : iptables-libs-1.8.4-22.el8.ppc64le                    7/28 
  Installing       : kmod-25-19.el8.ppc64le                                8/28 
  Installing       : fuse-common-3.3.0-15.el8.ppc64le                      9/28 
  Installing       : fuse3-3.3.0-15.el8.ppc64le                           10/28 
  Installing       : fuse-overlayfs-1.9-1.module+el8.6.0+15917+093ca6f8   11/28 
  Running scriptlet: fuse-overlayfs-1.9-1.module+el8.6.0+15917+093ca6f8   11/28 
  Installing       : jansson-2.14-1.el8.ppc64le                           12/28 
  Installing       : nftables-1:0.9.3-25.el8.ppc64le                      13/28 
  Running scriptlet: nftables-1:0.9.3-25.el8.ppc64le                      13/28 
  Installing       : platform-python-pip-9.0.3-22.el8.noarch              14/28 
  Installing       : python3-setuptools-39.2.0-6.el8.noarch               15/28 
  Installing       : python3-pip-9.0.3-22.el8.noarch                      16/28 
  Installing       : python36-3.6.8-38.module+el8.5.0+12207+5c5719bc.pp   17/28 
  Running scriptlet: python36-3.6.8-38.module+el8.5.0+12207+5c5719bc.pp   17/28 
  Installing       : libnet-1.1.6-15.el8.ppc64le                          18/28 
  Running scriptlet: libnet-1.1.6-15.el8.ppc64le                          18/28 
  Installing       : libslirp-4.4.0-1.module+el8.6.0+15875+dc9a2b96.ppc   19/28 
  Installing       : slirp4netns-1.2.0-2.module+el8.6.0+15917+093ca6f8.   20/28 
  Installing       : protobuf-c-1.3.0-6.el8.ppc64le                       21/28 
  Installing       : criu-3.15-3.module+el8.6.0+15875+dc9a2b96.ppc64le    22/28 
  Installing       : runc-1:1.1.3-2.module+el8.6.0+15917+093ca6f8.ppc64   23/28 
  Installing       : containers-common-2:1-35.module+el8.6.0+15917+093c   24/28 
  Installing       : oniguruma-6.8.2-2.el8.ppc64le                        25/28 
  Running scriptlet: oniguruma-6.8.2-2.el8.ppc64le                        25/28 
  Installing       : jq-1.6-3.el8.ppc64le                                 26/28 
  Installing       : skopeo-2:1.8.0-2.module+el8.6.0+15917+093ca6f8.ppc   27/28 
  Cleanup          : bash-4.4.20-3.el8.ppc64le                            28/28 
  Running scriptlet: bash-4.4.20-3.el8.ppc64le                            28/28 
  Verifying        : skopeo-2:1.8.0-2.module+el8.6.0+15917+093ca6f8.ppc    1/28 
  Verifying        : python36-3.6.8-38.module+el8.5.0+12207+5c5719bc.pp    2/28 
  Verifying        : oniguruma-6.8.2-2.el8.ppc64le                         3/28 
  Verifying        : criu-3.15-3.module+el8.6.0+15875+dc9a2b96.ppc64le     4/28 
  Verifying        : slirp4netns-1.2.0-2.module+el8.6.0+15917+093ca6f8.    5/28 
  Verifying        : protobuf-c-1.3.0-6.el8.ppc64le                        6/28 
  Verifying        : python3-pip-9.0.3-22.el8.noarch                       7/28 
  Verifying        : libslirp-4.4.0-1.module+el8.6.0+15875+dc9a2b96.ppc    8/28 
  Verifying        : containers-common-2:1-35.module+el8.6.0+15917+093c    9/28 
  Verifying        : jq-1.6-3.el8.ppc64le                                 10/28 
  Verifying        : fuse-overlayfs-1.9-1.module+el8.6.0+15917+093ca6f8   11/28 
  Verifying        : runc-1:1.1.3-2.module+el8.6.0+15917+093ca6f8.ppc64   12/28 
  Verifying        : libnet-1.1.6-15.el8.ppc64le                          13/28 
  Verifying        : libmnl-1.0.4-6.el8.ppc64le                           14/28 
  Verifying        : python3-setuptools-39.2.0-6.el8.noarch               15/28 
  Verifying        : libpcap-14:1.9.1-5.el8.ppc64le                       16/28 
  Verifying        : platform-python-pip-9.0.3-22.el8.noarch              17/28 
  Verifying        : libnftnl-1.1.5-5.el8.ppc64le                         18/28 
  Verifying        : fuse3-3.3.0-15.el8.ppc64le                           19/28 
  Verifying        : libibverbs-37.2-1.el8.ppc64le                        20/28 
  Verifying        : fuse3-libs-3.3.0-15.el8.ppc64le                      21/28 
  Verifying        : kmod-25-19.el8.ppc64le                               22/28 
  Verifying        : jansson-2.14-1.el8.ppc64le                           23/28 
  Verifying        : nftables-1:0.9.3-25.el8.ppc64le                      24/28 
  Verifying        : fuse-common-3.3.0-15.el8.ppc64le                     25/28 
  Verifying        : iptables-libs-1.8.4-22.el8.ppc64le                   26/28 
  Verifying        : bash-4.4.20-4.el8_6.ppc64le                          27/28 
  Verifying        : bash-4.4.20-3.el8.ppc64le                            28/28 
Installed products updated.

Upgraded:
  bash-4.4.20-4.el8_6.ppc64le                                                   
Installed:
  containers-common-2:1-35.module+el8.6.0+15917+093ca6f8.ppc64le                
  criu-3.15-3.module+el8.6.0+15875+dc9a2b96.ppc64le                             
  fuse-common-3.3.0-15.el8.ppc64le                                              
  fuse-overlayfs-1.9-1.module+el8.6.0+15917+093ca6f8.ppc64le                    
  fuse3-3.3.0-15.el8.ppc64le                                                    
  fuse3-libs-3.3.0-15.el8.ppc64le                                               
  iptables-libs-1.8.4-22.el8.ppc64le                                            
  jansson-2.14-1.el8.ppc64le                                                    
  jq-1.6-3.el8.ppc64le                                                          
  kmod-25-19.el8.ppc64le                                                        
  libibverbs-37.2-1.el8.ppc64le                                                 
  libmnl-1.0.4-6.el8.ppc64le                                                    
  libnet-1.1.6-15.el8.ppc64le                                                   
  libnftnl-1.1.5-5.el8.ppc64le                                                  
  libpcap-14:1.9.1-5.el8.ppc64le                                                
  libslirp-4.4.0-1.module+el8.6.0+15875+dc9a2b96.ppc64le                        
  nftables-1:0.9.3-25.el8.ppc64le                                               
  oniguruma-6.8.2-2.el8.ppc64le                                                 
  platform-python-pip-9.0.3-22.el8.noarch                                       
  protobuf-c-1.3.0-6.el8.ppc64le                                                
  python3-pip-9.0.3-22.el8.noarch                                               
  python3-setuptools-39.2.0-6.el8.noarch                                        
  python36-3.6.8-38.module+el8.5.0+12207+5c5719bc.ppc64le                       
  runc-1:1.1.3-2.module+el8.6.0+15917+093ca6f8.ppc64le                          
  skopeo-2:1.8.0-2.module+el8.6.0+15917+093ca6f8.ppc64le                        
  slirp4netns-1.2.0-2.module+el8.6.0+15917+093ca6f8.ppc64le                     

Complete!
Collecting yq
  Downloading https://files.pythonhosted.org/packages/60/2c/ab35b5ec3b884b6e33b18ba3f6be6b94d607501fca1e5a8de22988690cdb/yq-3.1.0-py3-none-any.whl
Collecting PyYAML>=5.3.1
  Downloading https://files.pythonhosted.org/packages/36/2b/61d51a2c4f25ef062ae3f74576b01638bebad5e045f747ff12643df63844/PyYAML-6.0.tar.gz (124kB)
  Installing build dependencies: started
  Installing build dependencies: finished with status 'done'
  Getting requirements to build wheel: started
  Getting requirements to build wheel: finished with status 'done'
    Preparing wheel metadata: started
    Preparing wheel metadata: finished with status 'done'
Collecting xmltodict>=0.11.0
  Downloading https://files.pythonhosted.org/packages/94/db/fd0326e331726f07ff7f40675cd86aa804bfd2e5016c727fa761c934990e/xmltodict-0.13.0-py2.py3-none-any.whl
Collecting toml>=0.10.0
  Downloading https://files.pythonhosted.org/packages/44/6f/7120676b6d73228c96e17f1f794d8ab046fc910d781c8d151120c3f1569e/toml-0.10.2-py2.py3-none-any.whl
Collecting argcomplete>=1.8.1
  Downloading https://files.pythonhosted.org/packages/d3/e5/c5509683462e51b070df9e83e7f72c1ccfe3f733f328b4a0f06804c27278/argcomplete-2.0.0-py2.py3-none-any.whl
Building wheels for collected packages: PyYAML
  Building wheel for PyYAML (PEP 517): started
  Building wheel for PyYAML (PEP 517): finished with status 'done'
  Created wheel for PyYAML: filename=PyYAML-6.0-cp38-cp38-linux_ppc64le.whl size=45333 sha256=5a47577924e6b7c2b3335ff3cb74b1151eeac3b0c66f73867f03bafbf4fa32dc
  Stored in directory: /tmp/pip-ephem-wheel-cache-v0mgngaq/wheels/95/84/67/ebeac632c63797cfbeb90128ca41073117721540dad526d213
Successfully built PyYAML
Installing collected packages: PyYAML, xmltodict, toml, argcomplete, yq
Successfully installed PyYAML-6.0 argcomplete-2.0.0 toml-0.10.2 xmltodict-0.13.0 yq-3.1.0
python: Python 3.8.12
yq: yq 3.1.0
jq: jq-1.6
--> 3f9d0a8c9bd
STEP 12/23: COPY ./build/scripts ./versions.json /build/
--> 53994aaf0cf
STEP 13/23: COPY ./build/scripts/clone_and_zip.sh /build/build/scripts/
--> 4c6ec33716a
STEP 14/23: COPY ./VERSION /
--> 37e39cdaad1
STEP 15/23: COPY ./devfiles /build/devfiles
--> e2e87ed9494
STEP 16/23: WORKDIR /build/
--> 31f37886aa6
STEP 17/23: RUN ./generate_devworkspace_templates.sh

> core-js@2.6.12 postinstall /build/node_modules/core-js
> node -e "try{require('./postinstall')}catch(e){}"

[96mThank you for using core-js ([94m https://github.com/zloirock/core-js [96m) for polyfilling JavaScript standard library![0m

[96mThe project needs your help! Please consider supporting of core-js on Open Collective or Patreon: [0m
[96m>[94m https://opencollective.com/core-js [0m
[96m>[94m https://www.patreon.com/zloirock [0m

[96mAlso, the author of core-js ([94m https://github.com/zloirock [96m) is looking for a good job -)[0m

+ @eclipse-che/che-theia-devworkspace-handler@0.0.1-1649678182
added 121 packages from 182 contributors and audited 121 packages in 10.742s

4 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

+ @eclipse-che/che-code-devworkspace-handler@1.64.0-dev-210b722
added 2 packages from 1 contributor and audited 240 packages in 2.192s

4 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
No sidecar policy. Setting to useDevContainer
--> f0a8e0469b0
STEP 18/23: RUN chmod -R g+rwX /build/resources
--> f7b379a7963
STEP 19/23: RUN ./check_referenced_images.sh devfiles --registries "${ALLOWED_REGISTRIES}" --tags "${ALLOWED_TAGS}"
 + quay.io/devspaces/code-rhel8:3.3 PASS - 3.3 allowed
 + quay.io/devspaces/machineexec-rhel8:3.3 PASS - 3.3 allowed
 + quay.io/devspaces/theia-endpoint-rhel8:3.3 PASS - 3.3 allowed
 + quay.io/devspaces/theia-rhel8:3.3 PASS - 3.3 allowed
 + quay.io/devspaces/udi-rhel8:3.3 PASS - 3.3 allowed
 = registry.redhat.io/jboss-eap-7/eap74-openjdk11-openshift-rhel8:7.4.4 PASS
 = registry.redhat.io/jboss-eap-7/eap-xp3-openjdk11-openshift-rhel8:3.0 PASS
 = registry.redhat.io/rhscl/mongodb-36-rhel7:1-50 PASS
--> c339c7b4f9b
STEP 20/23: RUN ./check_mandatory_fields.sh devfiles
Checking devfile 'devfiles/00_java11-maven-eap/meta.yaml'
Checking devfile 'devfiles/00_java11-maven-microprofile-xp3/meta.yaml'
Checking devfile 'devfiles/03_camelk/meta.yaml'
Checking devfile 'devfiles/03_java11-maven-gradle/meta.yaml'
Checking devfile 'devfiles/03_java11-maven-lombok/meta.yaml'
Checking devfile 'devfiles/03_java11-maven-quarkus/meta.yaml'
Checking devfile 'devfiles/04_nodejs-mongo/meta.yaml'
Checking devfile 'devfiles/04_nodejs-simple/meta.yaml'
Checking devfile 'devfiles/04_python/meta.yaml'
Checking devfile 'devfiles/05_cpp/meta.yaml'
Checking devfile 'devfiles/05_go/meta.yaml'
Checking devfile 'devfiles/05_php-cake/meta.yaml'
Checking devfile 'devfiles/05_php-di/meta.yaml'
--> 336323bfa96
STEP 21/23: COPY ./build/dockerfiles/rhel.cache_projects.sh /tmp/ 
--> a7dd7772f83
STEP 22/23: RUN /tmp/rhel.cache_projects.sh /build/ && rm -rf /tmp/rhel.cache_projects.sh /tmp/resources.tgz 
--> 491b4e7f076
STEP 23/23: RUN ./index.sh > /build/devfiles/index.json &&     ./list_referenced_images.sh devfiles > /build/devfiles/external_images.txt &&     ./list_referenced_images_by_file.sh devfiles > /build/devfiles/external_images_by_devfile.txt &&     chmod -R g+rwX /build/devfiles
COMMIT devfileregistry:tmp
--> ecb773dbf2e
Successfully tagged localhost/devfileregistry:tmp
ecb773dbf2ec6b5333b2089af771dd742a390da1989ab73e4d9dbb08ca71d1a3
<======= END BOOTSTRAP BUILD =======
Downloading root-local.tgz
Downloading resources.tgz
Untagged: localhost/devfileregistry:tmp
Deleted: ecb773dbf2ec6b5333b2089af771dd742a390da1989ab73e4d9dbb08ca71d1a3
Deleted: 491b4e7f076d26f8742563ef580a75bf8472eedb75781b7d0279a177ee78c0aa
Deleted: a7dd7772f839b336c2da8f5e17e64ca6f570c84ecf520602adb97bf7b390b6a7
Deleted: 336323bfa9692bc3cf44d5b483408686439ba72fa785b33012650c0bfec8f24a
Deleted: c339c7b4f9bc04e5cf8b01cdfd792b1f0f86dfbddd32ae647d05bda19a462c0d
Deleted: f7b379a7963ef6bf33a0b786eb00bec918c2826b2383ba3a3323eac4af36c8eb
Deleted: f0a8e0469b03a5da290cdca6a607e74967e60c77f2d37746cd67053cfe530282
Deleted: 31f37886aa6875c9722afc8803a9991d2cc9d9cefc5ecce41f8a5e18c7517511
Deleted: e2e87ed9494e1546540f553ce6ff7409b9a55e581d08dd81f8688e3a4bc0a57c
Deleted: 37e39cdaad1208a82b2ecc91ac0d612b113440300ff521622ab4b7927ec7365d
Deleted: 4c6ec33716afcd7e9e03809ce3e30f79058ae76711eee7c7c84c0315a01be59e
Deleted: 53994aaf0cffb312dd6a1e2d5ec19d7155473ed43bbd4b146200965be0ed6039
Deleted: 3f9d0a8c9bdea2c9d4ee66fcffd9d7dafb90adc5566e06272d73916d990640c6
Deleted: b0705258f632a5c765739ffd1d6b82580983f4383e3658670eb435697f6107eb
Deleted: 129b81b2c6e2864f6b9d42feecdff78f57020a9d6f7212a469770cb2b493f69c
Deleted: 23fbd761839e397a6316c5a0c30b9dbc8399f3a462ee06904a991367dec2c12b
Deleted: cc0393b87fbe768f35b5d20c67cdf3811b29f793099b5676f76806354adb776f
Deleted: 69f56d9de83e5818ec0f215b95503e56782df9b805771510781c3e90e5ea2be8
Deleted: 7b80723df014201a0bb6757649ef6dd77e3a5f3ada8ffc7559d1e008a9abca94
Deleted: bb995db69873aff40328d8aadb3adb2802c683a8c02700ababc4f3a4d9cee28e
Deleted: fb6943531078b3ca23b30dc941a658bce3dae094038e45dd598b8d6fe40bc4b8
Deleted: bd88937851af03dcc0b384c0115c147ab981bd0c296046d3f8a0843a6ce9be91
File already uploaded: root-local.tgz
File already uploaded: resources.tgz
All sources were already uploaded.
rm 'resources.tgz'
rm 'root-local.tgz'
